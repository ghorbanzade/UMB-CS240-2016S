%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% CS240: Programming in C
% Copyright 2016 Pejman Ghorbanzade <mail@ghorbanzade.com>
% Creative Commons Attribution-ShareAlike 4.0 International License
% https://github.com/ghorbanzade/UMB-CS240-2016S/blob/master/LICENSE
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\def \topDirectory {../..}
\def \texDirectory {\topDirectory/src/main/tex}
\def \resDirectory {\topDirectory/src/main/c/ls10}

\documentclass[compress]{beamer}
%\mode<presentation>
%\usetheme{default}

\usepackage{\texDirectory/template/style/directives}
\input{\texDirectory/template/config}
\usepackage{\texDirectory/template/style/beamerthemePejman}
\doc{number}{10}
%\setbeamertemplate{footline}[text line]{}

\begin{document}

\prepareCover

\section{Pointers}

\begin{slide}
	\begin{block}{Definition}

	A pointer is a variable that contains the address of a variable.

	\end{block}
	\begin{block}{Motivation}

	Using pointers improves efficiency, clarity and simplicity of the program.
	Pointers are key to constructing more advanced data structures.

	\end{block}
\end{slide}

\begin{slide}
	\begin{block}{Address of a Variable}

	We can access the address of a variable using the unary operator \alert{\texttt{\&}}.

	\inputminted[
		fontsize=\footnotesize,
		firstline=14,
		lastline=16,
		linenos
	]{c}{\resDirectory/point1.c}

	\begin{terminal}
	value of var1: 3
	address of var1: 0x7ffce5183f2c
	\end{terminal}

	\end{block}
\end{slide}

\begin{slide}
	\begin{block}{Declaring a Pointer}

	As for any variable, a pointer variable needs to be declared before use.
	The general form of a pointer variable declaration is as follows.

	\begin{terminal}
	@*\textit{type}*@ *var;
	\end{terminal}

	\end{block}
\end{slide}

\begin{slide}
	\begin{block}{Using a Pointer}

	We can access the object a pointer points to, using the unary operator \alert{\texttt{*}}.

	\inputminted[
		fontsize=\footnotesize,
		firstline=14,
		lastline=16,
		linenos
	]{c}{\resDirectory/point2.c}

	\begin{terminal}
	value of  var1: 3
	value of  var2: 0x7fff0a5d9ed4
	address of var1: 0x7fff0a5d9ed4
	address of var2: 0x7fff0a5d9ed8
	\end{terminal}

	\end{block}
\end{slide}

\begin{slide}
	\begin{block}{Dereferencing a Pointer}

	Dereferencing a pointer \texttt{ptr} allows access to the value of the variable to which \texttt{ptr} points.

	\inputminted[
		fontsize=\footnotesize,
		firstline=14,
		lastline=16,
		linenos
	]{c}{\resDirectory/point2.c}

	\begin{terminal}
	value of var1: 3
	value of *var2: 3
	address of var1: 0x7fff0a5d9ed4
	value of var2: 0x7fff0a5d9ed4
	\end{terminal}

	\end{block}
\end{slide}

\begin{slide}
	\begin{block}{Dereferencing a Pointer}

	A pointer can be dereferenced using the unary operator \alert{\texttt{*}}.

	\inputminted[
		fontsize=\footnotesize,
		firstline=14,
		lastline=17,
		linenos
	]{c}{\resDirectory/point2.c}

	\begin{terminal}
	value of var1: 3
	value of *var2: 3
	value of var3: 3
	\end{terminal}

	\end{block}
\end{slide}

\begin{slide}
	\begin{block}{Quiz}

	What is the output of the following code snippet?

	\inputminted[
		fontsize=\footnotesize,
		firstline=10,
		linenos
	]{c}{\resDirectory/point3.c}

	\pause

	\begin{terminal}
	value of var1: 4
	\end{terminal}

	\end{block}
\end{slide}

\subsection{Pointers as Function Arguments}

\begin{slide}
	\begin{block}{Problem Statement}

	\begin{itemize}
	\item[] All function arguments are passed by value.
	\item[] Altering an external variable in a calling function is not \textit{directly} possible.
	\item[] A function may not return more than one value.
	\end{itemize}

	\end{block}
\end{slide}

\begin{slide}
	\begin{block}{Proposed Solution}

	Instead of passing value of the variable to be altered, pass a pointer to that variable.

	\end{block}
\end{slide}

\begin{slide}
	\begin{block}{Quiz}

	Write a function with the following signature to swap values of two given variables.

	\begin{terminal}
	void swap(int *a, int *b);
	\end{terminal}

	\pause

	\inputminted[
		fontsize=\footnotesize,
		firstline=12,
		lastline=17,
		linenos
	]{c}{\resDirectory/swap.c}

	\end{block}
\end{slide}

\begin{slide}
	\begin{block}{Quiz}

	Write a program \texttt{swap.c} that uses a function with the following signature to swap values of two given variables.

	\begin{terminal}
	void swap(int *a, int *b);
	\end{terminal}

	\pause

	\inputminted[
		fontsize=\footnotesize,
		firstline=19,
		linenos
	]{c}{\resDirectory/swap.c}

	\end{block}
\end{slide}

\begin{slide}
	\begin{block}{Exercise}

	Write a function with the following signature to convert a string into an integer.
	The function returns zero if the conversion is possible and $-1$, otherwise.

	\begin{terminal}
	int str2int(char str[], int *num);
	\end{terminal}

	\end{block}
\end{slide}

\begin{slide}
	\begin{block}{Solution}

	\inputminted[
		fontsize=\scriptsize,
		firstline=14,
		lastline=31,
		linenos
	]{c}{\resDirectory/str2int.c}

	\end{block}
\end{slide}

\begin{slide}
	\begin{figure}
	\includegraphics[width=\textwidth]{\texDirectory/img/pointers.jpg}
	\end{figure}
\end{slide}

\end{document}
