%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% CS240: Programming in C
% Copyright 2015 Pejman Ghorbanzade <mail@ghorbanzade.com>
% Creative Commons Attribution-ShareAlike 4.0 International License
% https://github.com/ghorbanzade/UMB-CS240-2016S/blob/master/LICENSE
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section*{Question 2}

Bellatrix Lestrange, a CS240 student, was asked to write a program that takes an arbitrary number of non-negative integers as command line arguments and prints their average.
A sample run of the program was expected to be as given below.

\begin{terminal}
$ gcc command-line.c -o command-line
$ ./command-line
error: missing command line arguments
$ ./command-line 2 5 8
5.00
$ ./command-line 1 2 3 4 5 6
3.50
\end{terminal}

To solve this problem, she wrote the following program.

\lstset{language=c,tabsize=4}
\begin{lstlisting}
// Bellatrix Lestrange
// <bellatrix.lestran001@umb.edu>

#include <stdio.h>
#include <string.h>

int str2num(char str[]);

int main(int argc, char *argv[])
{
	int i;
	int sum = 0;
	float avg;
	for (i = 0; i < argc; i++)
		sum += str2num(argv[i]);
	avg = sum / argc;
	printf("%.2f\n", avg);
}

int str2num(char str[])
{
	int i;
	int res = 0;
	for (i = 0; i < sizeof(str); i++)
		res = res * 10 + str[i] - '0';
	return res;
}
\end{lstlisting}

Her program produces the following output.

\begin{terminal}
$ gcc command-line.c -o command-line
$ ./command-line
-15202348.00
$ ./command-line 2 5 8
-1147083.00
$ ./command-line 1 2 3 4 5 6
-12761818.00
\end{terminal}

Clearly, something is wrong with Bellatrix's code.
This is why she is asking for your help to debug her program and fix all its bugs.
Rewrite the program \texttt{command-line.c} such that its output matches the expected output provided previously.
