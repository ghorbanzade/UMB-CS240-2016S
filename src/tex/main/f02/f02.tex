%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% CS240: Programming in C
% Copyright 2015 Pejman Ghorbanzade <mail@ghorbanzade.com>
% Creative Commons Attribution-ShareAlike 4.0 International License
% https://github.com/ghorbanzade/UMB-CS240-2016S/blob/master/LICENSE
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\def \topDirectory {.}
\def \resDirectory {\topDirectory/src/c/main/f02}
\def \texDirectory {\topDirectory/src/tex}
\def \styDirectory {\texDirectory/sty}
\def \cfgDirectory {\texDirectory/cfg}

\documentclass[12pt,letterpaper,twoside]{article}
\usepackage{\styDirectory/directives}
\usepackage{\styDirectory/assignment}
\input{\cfgDirectory/config}

\usepackage{amsmath}

\begin{document}

\doc{title}{Final Exam}
\doc{date-pub}{May 16, 2016 at 6:30 PM}
\doc{date-due}{May 16, 2016 at 9:30 PM}
\doc{points}{20}

\prepare{header}

\section*{Question 1}

The following programs compile and run as expected.
Determine what each program prints on standard output.

\lstset{language=c,tabsize=4}
\begin{enumerate}[label=(\alph*)]
\item \lstinline{}
\lstinputlisting[firstline=10]{\resDirectory/hello-world.c}
\item \lstinline{}
\lstinputlisting[firstline=10]{\resDirectory/count-down.c}
\item \lstinline{}
\lstinputlisting[firstline=10]{\resDirectory/recursion.c}
\item \lstinline{}
\lstinputlisting[firstline=10]{\resDirectory/pointer.c}
\end{enumerate}

\newpage

\section*{Question 2}

The following functions compile and run as expected.
Briefly explain what each function is used for.
For each function, write a simple \texttt{main()} function that calls the function.

\lstset{language=c,tabsize=4}
\begin{enumerate}[label=(\alph*)]
\item \lstinline{}
\lstinputlisting[firstline=16,lastline=33]{\resDirectory/str2int.c}
\item \lstinline{}
\lstinputlisting[firstline=17,lastline=29]{\resDirectory/matrix.c}
\newpage
\item \lstinline{}
\lstinputlisting[firstline=16,lastline=27]{\resDirectory/adjacent.c}
\item \lstinline{}
\lstinputlisting[firstline=12,lastline=15]{\resDirectory/strcpy.c}
\end{enumerate}

\newpage

\section*{Question 3}

The C programming language, as of C99, supports complex number math with the three built-in types \texttt{double \_Complex}, \texttt{float \_Complex}, and \texttt{long double \_Complex}.
When the header \texttt{<complex.h>} is included, the three complex number types are also accessible as \texttt{double complex}, \texttt{float complex}, \texttt{long double complex}.
Standard arithmetic operators \texttt{+}, \texttt{-}, \texttt{*}, \texttt{/} can be used with real, complex, and imaginary types in any combination.

The following program shows how complex numbers can be used in C. It loads components of complex numbers from a file and prints their sum on standard output.

\lstset{language=c,tabsize=4}
\lstinputlisting[firstline=10]{\resDirectory/complex-numbers.h}
\lstinputlisting[firstline=10]{\resDirectory/complex-numbers.c}

The program compiles and executes as expected.
Based on the given source code, provide \textbf{brief} answers for the following questions.

\begin{enumerate}
\item
In \texttt{complex-numbers.h:10}, function \texttt{cprint} is declared but not defined.
What is the advantage of declaring a function in a header file?
Explain why removing this line causes a compilation error and how the error can be resolved without including this line.

\item
In \texttt{complex-numbers.c:13}, \texttt{fp} is checked to make sure it is not \texttt{null}.
A CS240 student argues this checking is unnecessary if we make sure the file \texttt{complex-numbers.txt} exists.
Describe whether you support this argument or not and provide brief explanations for your reasoning.

\item
In \texttt{complex-numbers.c:17}, variables \texttt{a} and \texttt{b} are passed by reference to function \texttt{scanf}.
Explain what happens if they are passed by value.

\item
In \texttt{complex-numbers.c:18}, \texttt{I} is used but it is not explicitly declared either in \texttt{complex-numbers.c} or \texttt{complex-numbers.h}.
This also applies to functions \texttt{creal} and \texttt{cimag} in \texttt{complex-numbers.c:31}.
Briefly explain why such practice has not caused compilation error.

\item
In \texttt{complex-numbers.c:21}, variable \texttt{sum} is passed to \texttt{cprint} by value. Modify this line and the function \texttt{cprint} such that \texttt{num} is passed by reference.

\end{enumerate}

\newpage

\section*{Question 4}

Since fall of You-Know-Who, Parvati Patil has been working as payroll clerk at Ministry of Magic.
She is responsible for preparing and reporting of payroll checks.
To prevent fraud and curruption, the Ministry has prohibited any use of magic in department of Human Resources.
Parvati is therefore required to calculate all payrolls as Muggles do.
Given the number of employees working at the Ministry, she has been thinking to write a software that automates payroll calculations for all employees.

Depending on their status, employees have different pay rates in the Ministry as given in Table \ref{tablequestion5}.
As is shown, part time and interns are paid by hour whereas full time employees are paid regardless of the number of hours they have worked.

You are asked to help in design of the payroll system for the Ministry.
Each employee has a name, an ID, the number of hours he has worked in a month and a status which is either full time, part time or intern.

\begin{enumerate}
\item Define a structure \texttt{employee} to enclose required information for a given employee.
\item Write a function that takes data of an employee and returns an initialized employee structure.
\item Write a function that takes an employee structure and calculates the monthly pay for that employee.
\item Write a function that takes an array of employee structures and returns the total amount to be paid to those employees.
\end{enumerate}

\begin{table}[H] \centering
\begin{tabular}{r c}
\textbf{Status} & \textbf{Rate}\\
\hline
Full Time & 800 Galleons / Month\\
Part Time & 4 Galleons / Hour\\
Intern & 2 Galleons / Hour
\end{tabular}
\caption{Pay rates for employees of Ministry of Magic}
\label{tablequestion5}
\end{table}

\newpage

\section*{Question 5}

The following structure is defined to implement a resizable array of integers.

\lstset{language=c,tabsize=4}
\lstinputlisting[firstline=20,lastline=24]{\resDirectory/array-list.h}

\begin{enumerate}
\item Write a function with the following signature that returns value of element $e_{i}$ of the array $A$ where $i$ is the element index.

\lstinputlisting[firstline=28,lastline=28,numbers=none]{\resDirectory/array-list.h}

\item Write a function with the following signature that updates value of element $e_{i}$ of the array $A$ with a given value $v$, where $i$ is the index..
The function is expected to return previous value of $e_{i}$.

\lstinputlisting[firstline=29,lastline=29,numbers=none]{\resDirectory/array-list.h}
\end{enumerate}

\end{document}
