%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% CS240: Programming in C
% Copyright 2016 Pejman Ghorbanzade <pejman@ghorbanzade.com>
% Creative Commons Attribution-ShareAlike 4.0 International License
% https://github.com/ghorbanzade/UMB-CS240-2016S/blob/master/LICENSE
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\ProvidesPackage{beamerthemeSimpleUmass}

% Packages
\usepackage{lastpage}
\usepackage{tikz}
\usepackage{listings}
\usepackage{minted}

% Minted
\usemintedstyle{trac}

% Listings
\definecolor{dkgreen}{rgb}{0,0.6,0}
\definecolor{gray}{rgb}{0.5,0.5,0.5}
\definecolor{mauve}{rgb}{0.58,0,0.82}
\definecolor{light-gray}{gray}{0.95}
\lstset{frame=tb,
	aboveskip=3mm,
	belowskip=3mm,
	showstringspaces=false,
	columns=flexible,
	basicstyle={\small\ttfamily},
	numbers=left,
	numbersep=10pt,
	numberstyle=\tiny\color{black},
	keywordstyle=\color{blue},
	commentstyle=\color{dkgreen},
	stringstyle=\color{mauve},
	breaklines=true,
	breakatwhitespace=true,
	tabsize=5,
	escapeinside={@*}{*@}
}

% Colors
\definecolor{myDarkTeal}{HTML}{003333}
\definecolor{myLightTeal}{HTML}{006666}

% Font Colors
\setbeamercolor{frametitle}{fg=white, bg=myDarkTeal}
\setbeamercolor{block title}{fg=myLightTeal}
\setbeamercolor{alerted text}{fg=myLightTeal}
\setbeamercolor{local structure}{fg=myLightTeal}
\setbeamercolor{caption name}{fg=myLightTeal}
\setbeamercolor{footline}{bg=myDarkTeal}

% Font Sizes
\setbeamerfont{caption}{size=\scriptsize}
\setbeamerfont{frametitle}{size=\normalsize}
\setbeamerfont{footline}{size=\tiny}
\setbeamerfont{block title}{size=\large}

% Define Slide
\newenvironment{slide}
	{\begin{frame}[fragile,environment=slide]\frametitle{\secname}}
	{\end{frame}}

% Define Terminal
\lstnewenvironment{terminal}
{\lstset{
	backgroundcolor=\color{light-gray},
	basicstyle=\small\ttfamily,
	numbers=none,
	xleftmargin=1cm,
	framexleftmargin=10mm,
	framextopmargin=2mm,
	framexbottommargin=2mm,
	frame=tb,
	framerule=0pt
}}
{}

% Cover Slide
\newcommand{\prepareCover}{%
	\begingroup
	\begin{frame}[plain]
	\begin{minipage}[b][\paperheight]{\textwidth}

	\vfill
	% Course Title
	\ifx\courseName\@empty
	\else {
		\raggedright
		\linespread{0.8}
		{\Large \courseName}
		\par
	}
	\vspace*{0.5em}
	\fi
	% Lecture Number
	{Lecture \docNumber}
	\par
	\vspace*{0.5em}
	% Horizontal Line
	\begin{tikzpicture}
	\draw[line width=0.5mm, myDarkTeal] (0, 0) -- (\textwidth, 0);
	\end{tikzpicture}
	\par
	\vspace*{1em}
	% Author
	\ifx\instructorName\@empty
	\else {
		{\small{Instructor}\\ \instructorName}
		\par
	}
	\vspace*{1em}
	\fi
	% Semester
	\ifx\courseSemester\@empty
	\else {
		\small{\courseSemester}
		\par
	}
	\vspace*{1em}
	\fi
	% Department
	\ifx\courseDepartment\@empty
	\else {
		\small{\courseDepartment}
		\par
	}
	\vspace*{0.25em}
	\fi
	% University
	\ifx\courseUniversity\@empty
	\else {
		\normalsize{\courseUniversity}
		\par
	}
	\vspace*{0.5em}
	\fi
	% End
	\vfill
	\vspace*{5mm}

	\end{minipage}
	\end{frame}
	\endgroup
}

%% Section Starter Slide
\AtBeginSection[]{
	\begingroup
	\begin{frame}[plain]

	% Course Name
	\ifx\courseName\@empty
	\else {
		\courseName
		\par
	}
	\vspace*{0.5em}
	\fi
	% Lecture Number
	\ifx\docNumber\@empty
	\else {
		Lecture \docNumber
		\par
	}
	\vspace*{0.5em}
	\fi
	% Horizontal Line
	\begin{tikzpicture}
	\draw[line width=0.5mm, myDarkTeal] (0, 0) -- (\textwidth, 0);
	\end{tikzpicture}
	\par
	\vspace*{1em}
	% Section Name
	\ifx\secName\@empty
	\else {
		\secname
		\par
	}
	\vspace*{0.5em}
	\fi

	\end{frame}
	\endgroup
}

%% Captions
\setbeamertemplate{caption label separator}{: }

% Footline
\setbeamertemplate{navigation symbols}{}
\setbeamertemplate{footline}[text line]{
	\parbox{\linewidth}{
		\vspace*{-10pt}
		\instructorName \hfill \courseId: \courseName, \courseUniversity, \courseSemester \hfill \thepage\ of \pageref{LastPage}
	}
}

% Line Height
\linespread{1.15}

% Document Configurations
\title{Lecture Slide \docNumber}
\author{\instructorName}
